<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Register ‚Äî Code Everyday</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='auth.css') }}">
</head>
<body>
<div class="auth-wrapper">
  <div class="auth-card">
    <div class="brand">
      <span class="brand-icon">&lt;/&gt;</span>
      <h1 class="brand-name">Code Everyday</h1>
      <p class="brand-sub">Create your account and start the streak.</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="flash flash--{{ category }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form action="{{ url_for('register') }}" method="post" class="auth-form" id="reg-form">
      <div class="field">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" placeholder="choose_a_username" minlength="3" autocomplete="username" required>
        <span class="field-hint">At least 3 characters, letters and numbers only</span>
      </div>
      <div class="field">
        <label for="password">Password</label>
        <div class="password-wrap">
          <input type="password" id="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" autocomplete="new-password" required>
          <button type="button" class="show-pw" onclick="togglePw()" aria-label="Toggle password">üëÅ</button>
        </div>
        <span class="field-hint">At least 6 characters</span>
      </div>
      <div class="strength-bar-wrap" id="strength-wrap" hidden>
        <div class="strength-bar" id="strength-bar"></div>
        <span class="strength-label" id="strength-label"></span>
      </div>
      <button type="submit" class="btn-primary" id="submit-btn">
        <span class="btn-text">Create Account</span>
        <span class="btn-loader" hidden>‚è≥ Creating...</span>
      </button>
    </form>

    <p class="auth-switch">Already have an account? <a href="{{ url_for('login') }}">Sign in</a></p>
  </div>

  <div class="auth-deco" aria-hidden="true">
    <div class="deco-window">
      <div class="deco-titlebar">
        <span class="deco-dot deco-dot--red"></span>
        <span class="deco-dot deco-dot--yellow"></span>
        <span class="deco-dot deco-dot--green"></span>
        <span class="deco-filename">coder.js</span>
      </div>
      <pre class="deco-code"><span class="c-comment">// Join the daily challenge</span>
<span class="c-kw">class</span> <span class="c-fn">Coder</span> {
  <span class="c-fn">constructor</span>(name) {
    <span class="c-kw">this</span>.name = name;
    <span class="c-kw">this</span>.streak = <span class="c-num">0</span>;
    <span class="c-kw">this</span>.level = <span class="c-str">"beginner"</span>;
  }

  <span class="c-fn">solveToday</span>() {
    <span class="c-kw">this</span>.streak++;
    console.<span class="c-fn">log</span>(<span class="c-str">`Day ${this.streak}!`</span>);
    <span class="c-kw">return</span> <span class="c-str">"‚úì Accepted"</span>;
  }
}</pre>
    </div>
    <div class="deco-stats">
      <div class="stat-pill">üöÄ Free forever</div>
      <div class="stat-pill">üí° Beginner friendly</div>
    </div>
  </div>
</div>

<script>
  function togglePw() {
    const inp = document.getElementById('password');
    inp.type = inp.type === 'password' ? 'text' : 'password';
  }

  const pwInput = document.getElementById('password');
  const strengthWrap = document.getElementById('strength-wrap');
  const strengthBar = document.getElementById('strength-bar');
  const strengthLabel = document.getElementById('strength-label');

  pwInput.addEventListener('input', function() {
    const val = this.value;
    if (!val) { strengthWrap.hidden = true; return; }
    strengthWrap.hidden = false;
    let score = 0;
    if (val.length >= 6) score++;
    if (val.length >= 10) score++;
    if (/[A-Z]/.test(val)) score++;
    if (/[0-9]/.test(val)) score++;
    if (/[^A-Za-z0-9]/.test(val)) score++;
    const levels = ['', 'Weak', 'Fair', 'Good', 'Strong', 'Very Strong'];
    const colors = ['', '#f87171', '#fbbf24', '#38bdf8', '#4ade80', '#a78bfa'];
    strengthBar.style.width = (score * 20) + '%';
    strengthBar.style.background = colors[score];
    strengthLabel.textContent = levels[score] || '';
    strengthLabel.style.color = colors[score];
  });

  document.getElementById('reg-form').addEventListener('submit', function() {
    const btn = document.getElementById('submit-btn');
    btn.querySelector('.btn-text').hidden = true;
    btn.querySelector('.btn-loader').hidden = false;
    btn.disabled = true;
  });
</script>
</body>
</html>